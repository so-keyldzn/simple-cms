model Post {
  id              String    @id @default(cuid())
  title           String
  slug            String    @unique
  excerpt         String?
  content         String    @db.Text
  coverImage      String?
  published       Boolean   @default(false)
  publishedAt     DateTime?
  commentsEnabled Boolean   @default(true)
  defaultLocale   String    @default("fr")
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  author          User               @relation("Posts", fields: [authorId], references: [id], onDelete: Cascade)
  authorId        String

  category        Category?          @relation(fields: [categoryId], references: [id], onDelete: SetNull)
  categoryId      String?

  tags            PostTag[]
  comments        Comment[]          @relation("PostComments")
  translations    PostTranslation[]  @relation("PostTranslations")

  @@index([authorId])
  @@index([categoryId])
  @@index([published])
  @@index([slug])
}

model Category {
  id            String                @id @default(cuid())
  name          String                @unique
  slug          String                @unique
  description   String?
  defaultLocale String                @default("fr")
  createdAt     DateTime              @default(now())
  updatedAt     DateTime              @updatedAt

  posts         Post[]
  translations  CategoryTranslation[] @relation("CategoryTranslations")

  @@index([slug])
}

model Tag {
  id            String           @id @default(cuid())
  name          String           @unique
  slug          String           @unique
  defaultLocale String           @default("fr")
  createdAt     DateTime         @default(now())
  updatedAt     DateTime         @updatedAt

  posts         PostTag[]
  translations  TagTranslation[] @relation("TagTranslations")

  @@index([slug])
}

model PostTag {
  post      Post     @relation(fields: [postId], references: [id], onDelete: Cascade)
  postId    String
  tag       Tag      @relation(fields: [tagId], references: [id], onDelete: Cascade)
  tagId     String

  @@id([postId, tagId])
  @@index([postId])
  @@index([tagId])
}       